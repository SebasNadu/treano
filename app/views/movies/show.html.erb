<div class="container">
  <h4 class="py-3">This is a movie show</h4>

  <div>
    <p><%= @movie.title %></p>
    <p><%= @movie.country_of_origin %></p>
    <p><%= @movie.release_date %></p>
    <p><%= @movie.overview %></p>
    <p><%= @movie.rating_average %></p>
    <p><%= link_to "Home", root_path %>
  </div>

  <%#= render "shared/new_list_item", locals: { listable: @listable, list_item: @list_item } %>
 <div data-controller="insert-in-list" data-insert-in-list-position-value="beforebegin">
    <div data-insert-in-list-target="infos">
      <% user_review = Review.where(reviewable_id: params[:id], reviewable_type: "Movie", user: current_user) %>
      <% if user_review.empty? %>
      <%= render "shared/review_form",  reviewable: @reviewable, review: @review %>
      <% else %>
      <p>You already reviewed this movie</p>
      <%= render "shared/review", review: user_review.first %>
      <% end %>

      <% if @movie.reviews.empty? %>
        <div data-insert-in-list-target="first">
          <small><em class="text-muted">Be the first one to review this movie</em></small>
        </div>
      <% end %>
    </div>
    <%= render "shared/review_list", reviewable: @movie %>
  </div>

</div>
