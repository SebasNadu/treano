<div class="media-banner mt-n5" style="background-image: linear-gradient(165deg, rgba(0,0,0,0.5) 0%, rgba(255,255,255,0.1) 35%, rgba(0,0,0,1) 75%), url('<%= @movie.backdrop_url %>')">
  <div class="row h-100 w-100 pt-5 m-0">
    <div class="col-12 col-md-7 d-flex flex-column align-items-center justify-content-center">
      <% if @movie.trailer.present? %>
        <% trailer =  @movie.trailer %>
        <% trailer["https://www.youtube.com/watch?v="] = "https://www.youtube.com/embed/" %>
        <iframe width="450px" height="255px" src="<%= trailer %>">
        </iframe>
      <% end %>
      <div class="my-4">
        <h2 class="fw-bolder px-2 trans-text">“ <%= @movie.tagline %> „</h2>
        <p><%= @movie.rating_average %></p>
        <p><%= @movie.status %></p>
        <p><%= @movie.critic_score %></p>
        <p><%= @movie.popularity %></p>
      </div>
    </div>
    <div class="col-12 col-md-5 d-flex flex-column align-items-center justify-content-center px-5">
      <h1 class="fs-1 fw-bold"><%= @movie.title %></h1>
      <div class="info-small pb-2">
        <small class="mb-2"><%= @movie.year %> •</small>
        <small class="mb-2"><%= @movie.runtime %> min •</small>
        <% @movie.genre_names[0..-2].each do |genre| %>
          <small class="mb-2"><%= genre %>,</small>
        <% end %>
        <small class="mb-2"><%= @movie.genre_names[-1] %> •</small>
        <% if @movie.us_rating.present? %>
          <small class="mb-2 trans-text px-1 fw-semibold"><%= @movie.us_rating %></small>
        <% end %>
      </div>
      <p class="text-center"><%= @movie.overview %></p>
      <div>
        <%= @movie.media_providers.each do |provider| %>
          <p><%= provider %></p>
        <% end %>
      </div>
    </div>
  </div>

</div>

<div class="container">
  <h4 class="py-3">This is a movie show</h4>

  <div>
    <p><%= @movie.title %></p>
    <p><%= @movie.release_date %></p>
    <p><%= @movie.overview %></p>
    <p><%= @movie.tagline %></p>
    <p><%= @movie.rating_average %></p>
    <p><%= link_to "Home", root_path %>
  </div>

  <%= render "list_items/new_list_item", listable: @listable, list_item: @list_item, lists: @lists %>
 <div data-controller="insert-in-list" data-insert-in-list-position-value="afterbegin">
    <div data-insert-in-list-target="infos">
      <% user_review = Review.where(reviewable_id: params[:id], reviewable_type: "Movie", user: current_user) %>
      <% if user_review.empty? %>
        <%= render "reviews/review_form",  reviewable: @reviewable, review: @review %>
      <% else %>
       <p>You already reviewed this movie</p>
      <% end %>
      <% if @movie.reviews.empty? %>
        <div data-insert-in-list-target="first">
          <small><em class="text-muted">Be the first one to review this movie</em></small>
        </div>
      <% end %>
    </div>
    <%= render "reviews/review_list", reviewable: @movie %>
  </div>
</div>
